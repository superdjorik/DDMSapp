#:import MeshLinePlot kivy.garden.graph.MeshLinePlot
<DroneDetector>
BoxLayout:
    id: box_root
    orientation: 'vertical'
    Label:
        size_hint_y: None
        height: '50dp'
        text: 'Drone Detector'
    ScreenManager:
        id: sm
        on_parent: app.uiDict['sm'] = self
        Screen:
            name: 'screen_scan'
            BoxLayout:
                orientation: 'vertical'
                ScrollView:
                    BoxLayout:
                        id: box_list
                        orientation: 'vertical'
                        on_parent: app.uiDict['box_list'] = self
                        size_hint_y: None
                        height: max(self.minimum_height, self.parent.height)
                Button:
                    id: btn_scan
                    on_parent: app.uiDict['btn_scan'] = self
                    size_hint_y: None
                    height: '50dp'
                    text: 'Сканировать USB устройства'
                    on_release: app.on_btn_scan_release()
        MDScreen:
            name: 'screen_main'
            MDBottomNavigation:
                selected_color_background: "orange"
                text_color_active: "lightgrey"

                MDBottomNavigationItem:
                    name: 'charts'
                    icon: 'chart-bell-curve'
                    text: 'Визуализация'
                    ScrollView:
                        BoxLayout:
                            id: graph
                            on_parent: app.uiDict['chart'] = self
                            size_hint_y: None
#                            height: max(self.minimum_height, self.parent.height)
                            size: root.width * 1 / 3 , root.height * 2 / 4


                            plot: MeshLinePlot
                            ylabel:'Y'
                            xlabel:'X'
                            x_ticks_minor:5
                            x_tics_major:25
                            y_ticks_major:1
                            y_grid_label:True
                            x_grid_label:True
                            padding:5
                            x_grid:True
                            y_grid:True
                            xmin:-0
                            xmax:100
                            ymin:-1
                            ymax:1

                    GridLayout:
                        cols: 2
#                        size: root.width * 1 / 3 , root.height * 1 / 4
                        size_hint_y: 0.2
                        Label:
                            text: 'Напряжение'
#                            size_hint_y: None
                            text_size: self.size
                            height: '30dp'
#                            padding_x: '5dp'
                        Label:
                            id: batt_level
                            on_parent: app.uiDict['batt_level'] = self
                            size_hint_y: None
                            text_size: self.size
                            height: '30dp'
                            padding_x: '5dp'
                            readonly: True
                            text: ''
                        Label:
                            text: 'WiFi'
#                            size_hint_y: None
                            text_size: self.size
                            height: '30dp'
#                            padding_x: '5dp'
                        Label:
                            id: wifi_level
                            on_parent: app.uiDict['wifi_level'] = self
                            size_hint_y: None
#                            text_size: self.size
                            height: '50dp'
                            padding_x: '5dp'
                            readonly: True
                            text: ''

                MDBottomNavigationItem:
                    name: 'console'
                    text: 'Консоль'
                    icon: 'console'
                    BoxLayout:
                        orientation: 'vertical'
                        ScrollView:
                            size_hint_y: None
                            height: '50dp'
                            TextInput:
                                id: txtInput_write
                                on_parent: app.uiDict['txtInput_write'] = self
                                size_hint_y: None
                                height: max(self.minimum_height, self.parent.height)
                                text: ''
                        Button:
                            id: btn_write
                            on_parent: app.uiDict['btn_write'] = self
                            size_hint_y: None
                            height: '50dp'
                            text: 'Write'
                            on_release: app.on_btn_write_release()
                        ScrollView:
                            TextInput:
                                id: txtInput_read
                                on_parent: app.uiDict['txtInput_read'] = self
                                size_hint_y: None
                                height: max(self.minimum_height, self.parent.height)
                                readonly: True
                                text: ''
                MDBottomNavigationItem:
                    name: 'settings'
                    text: 'Настройки'
                    icon: 'cog'

                    MDLabel:
                        text: 'Пока нечего настраивать'
                        halign: 'center'
